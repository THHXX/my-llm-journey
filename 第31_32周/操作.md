# 第31-32周：智能客服开发指南 (RAG + Agent)

## 1. 目录导航
- [1. 简介](#1-简介)
- [2. 环境安装](#2-环境安装)
- [3. 运行代码](#3-运行代码)
- [4. 预期结果](#4-预期结果)

## 1. 简介
本周任务是构建一个**具备“大脑”和“记忆”的智能客服**。
我们不再只是简单地调用模型，而是通过 **RAG (检索增强生成)** 让它能查阅本地法律文档，并通过 **Agent (智能体)** 框架让它自主决定何时查文档、何时直接回答。

## 2. 环境安装
我们需要安装 LangChain 框架及相关组件。请在终端中运行以下命令：

```powershell
# 安装 LangChain 核心及社区组件
pip install langchain langchain-community

# 安装 阿里云 DashScope SDK
pip install dashscope

# 安装 向量数据库 FAISS (CPU版)
pip install faiss-cpu
```

> **注意**：本周我们优化了方案，使用阿里自家的 `DashScopeEmbeddings` 替代了 Google 的 `HuggingFaceEmbeddings`，这样**无需下载几个GB的本地模型文件**，速度更快，且对中文支持更好。

## 3. 运行代码
确保你已经在 `law_sample.txt` 中看到了我们准备好的法律条文。
然后直接运行 Python 脚本：

```powershell
python "f:\Desktop\个人资料\大模型学习项目\第31_32周\rag_agent.py"
```

## 4. 预期结果
你将看到 AI 的**思考过程 (Verbose)**：

1.  **用户提问**：“合同违约需要赔偿什么？”
2.  **AI 思考 (Thought)**：我需要查找关于合同违约的法律条款。
3.  **AI 行动 (Action)**：调用 `search_legal_docs` 工具。
4.  **观察 (Observation)**：检索到《民法典》第五百七十七条、五百八十四条等内容。
5.  **AI 回答 (Final Answer)**：根据检索到的内容，回答违约责任包括继续履行、补救措施或赔偿损失等。

接着进行**第二轮对话**：
1.  **用户提问**：“那如果违约金定得太高怎么办？”
2.  **AI 回答**：它会结合之前的上下文，再次检索或直接根据刚才查到的第五百八十五条回答（可以请求法院予以适当减少）。
