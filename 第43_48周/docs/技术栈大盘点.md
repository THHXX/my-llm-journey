# 🛠️ 金融投研助手 - 技术栈全景大盘点

本文档详细梳理了本项目（金融投研助手 RAG 系统）所使用的核心软件、框架及开源项目。旨在帮助开发者快速理解系统架构与各个组件的独特价值。

---

## 目录

<div style="display: flex; align-items: flex-start;">

<!-- 左侧目录 (20%宽度) -->
<div style="width: 20%; position: sticky; top: 0; background-color: #f6f8fa; padding: 20px; border-right: 1px solid #d0d7de; flex-shrink: 0; box-sizing: border-box;">

<h3 style="margin-top: 0;">📚 导航</h3>

1. [前端交互层](#1-前端交互层-frontend--interaction)
2. [核心编排层](#2-核心编排层-orchestration)
3. [数据存储层](#3-数据存储层-storage--indexing)
4. [模型推理层](#4-模型推理层-model-inference)
5. [数据处理层](#5-数据处理层-data-processing)

</div>

<!-- 右侧正文 (80%宽度) -->
<div style="width: 80%; padding: 20px; box-sizing: border-box;">

## 1. 前端交互层 (Frontend & Interaction)

### 🌟 Streamlit
> **"The fastest way to build data apps"**

*   **简介**: 一个专为机器学习和数据科学团队设计的 Python Web 框架。它允许开发者仅用 Python 代码就能快速构建出美观、交互性强的 Web 应用，无需掌握 HTML/CSS/JS。
*   **在本项目中的作用**:
    *   **构建 UI**: 提供聊天界面 (`st.chat_message`)、侧边栏设置 (`st.sidebar`) 和文件上传入口。
    *   **状态管理**: 使用 `st.session_state` 维护多轮对话的历史记录。
    *   **动态渲染**: 实时响应用户的输入，流式显示 LLM 的回复。

### 📊 Plotly
> **"The leading graphing library for scientific and financial data"**

*   **简介**: 一个强大的交互式绘图库。与静态图片不同，Plotly 生成的图表支持鼠标悬停查看数值、缩放、平移和图片导出。
*   **在本项目中的作用**:
    *   **金融图表绘制**: 替代 Streamlit 原生图表，用于绘制更专业的折线图（趋势分析）和柱状图（数据对比）。
    *   **交互体验**: 让用户能精准查看某一年的具体营收数值，而不是靠眼力估算。

---

## 2. 核心编排层 (Orchestration)

### 🦜🔗 LangChain (Text Splitters)
> **"Building applications with LLMs through composability"**

*   **简介**: 虽然本项目没有使用 LangChain 庞大的 Chain 体系，但我们采用了其最精华的 **Text Splitters** 模块。
*   **在本项目中的作用**:
    *   **RecursiveCharacterTextSplitter**: 智能地将长篇财报 PDF 切分为适合模型处理的小块 (Chunks)。它能优先在段落、句子边界处切分，最大程度保留语义完整性。

### 🐍 Python Standard Library & Custom Logic
*   **RAG Engine**: 我们手写了定制化的 RAG 引擎 (`rag_engine.py`)，实现了检索、去重、Prompt 组装的核心逻辑，保持了系统的轻量级和高可控性。

---

## 3. 数据存储层 (Storage & Indexing)

### 🏳️‍🌈 ChromaDB
> **"The AI-native open-source embedding database"**

*   **简介**: 一个轻量级、高性能的向量数据库，专为 LLM 应用设计。它易于部署（支持内存模式和持久化模式），且 API 极其简洁。
*   **在本项目中的作用**:
    *   **向量存储**: 存储 PDF 文本块的向量表示 (Embeddings)。
    *   **元数据管理**: 存储每个文本块的 `page` (页码)、`source` (文件名) 等信息，实现“页码溯源”功能。
    *   **语义检索**: 提供 KNN/ANN 算法，快速找出与用户问题最相似的文本片段。

---

## 4. 模型推理层 (Model Inference)

### 🦙 Llama.cpp
> **"Port of Facebook's LLaMA model in C/C++"**

*   **简介**: 一个奇迹般的开源项目，它让普通家用电脑（甚至没有显卡）也能流畅运行大规模语言模型。通过量化技术 (GGUF 格式)，它极大地降低了硬件门槛。
*   **在本项目中的作用**:
    *   **本地推理后端**: 提供 `llama-server.exe`，将本地模型封装成类似 OpenAI 的 HTTP API。
    *   **隐私保护**: 确保所有数据都在本地处理，无需上传云端。

### 🇨🇳 Qwen (通义千问)
> **"Alibaba Cloud's Large Language Model"**

*   **简介**: 阿里云推出的超强开源模型系列。
    *   **Qwen1.5-0.5B (Local)**: 只有 0.5B 参数的小钢炮，速度极快，适合本地测试流程。
    *   **Qwen-Max (Cloud)**: 云端旗舰模型，逻辑推理能力和指令遵循能力（特别是 JSON 生成）极强。
*   **在本项目中的作用**:
    *   **大脑**: 理解用户问题，阅读检索到的财报片段，生成最终的自然语言回答和图表数据。

### 🧬 BGE-M3 (BAAI General Embedding)
> **"Multi-Function, Multi-Lingual, and Multi-Granularity"**

*   **简介**: 智源研究院（BAAI）发布的嵌入模型。它是目前开源界最强的中文/多语言 Embedding 模型之一，支持长文本和混合检索。
*   **在本项目中的作用**:
    *   **文本向量化**: 将“财报文字”和“用户问题”转换成数学向量，使得计算机可以计算它们之间的语义相似度。

---

## 5. 数据处理层 (Data Processing)

### 📄 pdfplumber
> **"Plumb a PDF for detailed information"**

*   **简介**: 一个基于 `pdfminer.six` 的 Python 库，专注于从 PDF 中提取更精细的信息（如表格、布局、字符坐标）。
*   **在本项目中的作用**:
    *   **精准解析**: 相比简单的 `PyPDF2`，它能更好地处理复杂的财报排版。
    *   **页码追踪**: 让我们能够精确地知道每一段文字出自第几页，是实现“精准引用”的基础。

### 🐼 Pandas
> **"Python Data Analysis Library"**

*   **简介**: Python 数据分析领域的霸主，提供高效的数据结构 (DataFrame) 用于数据操作。
*   **在本项目中的作用**:
    *   **图表数据中转**: 将 LLM 生成的 JSON 数据转换为 DataFrame，供 Plotly 渲染使用。

</div>
</div>
